# üîß –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Hikvision API

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å API —Ç—É—Ä–Ω–∏–∫–µ—Ç–∞ Hikvision –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å PostgreSQL.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [API –∑–∞–ø—Ä–æ—Å—ã](#api-–∑–∞–ø—Ä–æ—Å—ã)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
4. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
5. [HTTP API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã](#http-api-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
6. [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è](#–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏-–∏-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

- **Hikvision API** - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–æ–±—ã—Ç–∏–π
- **PostgreSQL** - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Express —Å–µ—Ä–≤–µ—Ä** - HTTP API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- **Node.js –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –∫–ª–∞—Å—Å—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## üîå API –∑–∞–ø—Ä–æ—Å—ã

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**Endpoint:** `POST /artemis/api/resource/v1/person/advance/personList`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
  "pageNo": 1,           // –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  "pageSize": 100,       // –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  "personName": "–ò–≤–∞–Ω",  // –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  "personId": "123456",  // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  "orgIndexCode": "org1" // –ö–æ–¥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "list": [
      {
        "personId": "123456789",
        "personName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
        "orgIndexCode": "org001",
        "gender": 1,
        "phoneNo": "+998901234567",
        "email": "ivan@example.com",
        "certificateType": 1,
        "certificateNo": "AA1234567"
      }
    ],
    "total": 1,
    "pageNo": 1,
    "pageSize": 100
  }
}
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ—Å–µ—â–µ–Ω–∏—è

**Endpoint:** `POST /artemis/api/resource/v1/acs/event/query`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
  "startTime": "2024-01-01T00:00:00+05:00",  // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  "endTime": "2024-01-31T23:59:59+05:00",    // –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  "pageNo": 1,                               // –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  "pageSize": 100,                           // –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  "eventType": 1,                            // –¢–∏–ø —Å–æ–±—ã—Ç–∏—è (1-–≤—Ö–æ–¥, 2-–≤—ã—Ö–æ–¥)
  "personId": "123456789"                    // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "list": [
      {
        "eventId": "evt_001",
        "personId": "123456789",
        "personName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
        "eventTime": "2024-01-15T08:30:00+05:00",
        "eventType": 1,
        "eventTypeName": "–í—Ö–æ–¥",
        "doorIndexCode": "door001",
        "doorName": "–ì–ª–∞–≤–Ω—ã–π –≤—Ö–æ–¥",
        "deviceIndexCode": "dev001",
        "deviceName": "–¢—É—Ä–Ω–∏–∫–µ—Ç 1"
      }
    ],
    "total": 1,
    "pageNo": 1,
    "pageSize": 100
  }
}
```

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users` (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
```sql
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    student_id VARCHAR UNIQUE,           -- personId –∏–∑ Hikvision
    first_name VARCHAR,                  -- –ò–º—è
    last_name VARCHAR,                   -- –§–∞–º–∏–ª–∏—è
    phone VARCHAR,                       -- –¢–µ–ª–µ—Ñ–æ–Ω
    email VARCHAR,                       -- Email
    gender user_gender,                  -- –ü–æ–ª (male/female)
    passport_series VARCHAR,             -- –°–µ—Ä–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞
    passport_pinfl VARCHAR,              -- –ü–ò–ù–§–õ
    is_active BOOLEAN DEFAULT true,      -- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### –¢–∞–±–ª–∏—Ü–∞ `attendance_logs` (—Å–æ–∑–¥–∞–Ω–∞)
```sql
CREATE TABLE attendance_logs (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    event_id VARCHAR UNIQUE,             -- ID —Å–æ–±—ã—Ç–∏—è –∏–∑ Hikvision
    person_id VARCHAR NOT NULL,          -- ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    person_name VARCHAR,                 -- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    event_time TIMESTAMP WITH TIME ZONE NOT NULL, -- –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è
    event_type INTEGER NOT NULL,         -- –¢–∏–ø —Å–æ–±—ã—Ç–∏—è (1-–≤—Ö–æ–¥, 2-–≤—ã—Ö–æ–¥)
    event_type_name VARCHAR,             -- –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è
    door_index_code VARCHAR,             -- –ö–æ–¥ –¥–≤–µ—Ä–∏
    door_name VARCHAR,                   -- –ù–∞–∑–≤–∞–Ω–∏–µ –¥–≤–µ—Ä–∏
    device_index_code VARCHAR,           -- –ö–æ–¥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    device_name VARCHAR,                 -- –ù–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

## üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
import HikvisionIntegration from './hikvision-integration.js';

const hikvision = new HikvisionIntegration();

// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const users = await hikvision.getUsersFromHikvision({
    pageNo: 1,
    pageSize: 100
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
const events = await hikvision.getEventsFromHikvision({
    startTime: '2024-01-01T00:00:00+05:00',
    endTime: '2024-01-31T23:59:59+05:00'
});

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
const syncResult = await hikvision.syncUsers({
    pageNo: 1,
    pageSize: 100
});

// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
const eventsResult = await hikvision.syncEvents({
    startTime: '2024-01-01T00:00:00+05:00',
    endTime: '2024-01-31T23:59:59+05:00'
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
const stats = await hikvision.getAttendanceStats({
    startDate: '2024-01-01',
    endDate: '2024-01-31'
});
```

### 2. HTTP API –∑–∞–ø—Ä–æ—Å—ã

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```bash
curl "http://localhost:3000/api/hikvision/users?pageNo=1&pageSize=10&personName=–ò–≤–∞–Ω"
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
```bash
curl "http://localhost:3000/api/hikvision/events?startTime=2024-01-01T00:00:00+05:00&endTime=2024-01-31T23:59:59+05:00"
```

#### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```bash
curl -X POST "http://localhost:3000/api/hikvision/sync/users" \
  -H "Content-Type: application/json" \
  -d '{"pageNo":1,"pageSize":10}'
```

#### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
```bash
curl -X POST "http://localhost:3000/api/hikvision/sync/events" \
  -H "Content-Type: application/json" \
  -d '{"startTime":"2024-01-01T00:00:00+05:00","endTime":"2024-01-31T23:59:59+05:00"}'
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```bash
curl "http://localhost:3000/api/hikvision/stats?startDate=2024-01-01&endDate=2024-01-31"
```

## üåê HTTP API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### GET `/api/hikvision/users`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ Hikvision

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `pageNo` (number) - –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `pageSize` (number) - –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `personName` (string) - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
- `personId` (string) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `orgIndexCode` (string) - –ö–æ–¥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

### GET `/api/hikvision/events`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ—Å–µ—â–µ–Ω–∏—è –∏–∑ Hikvision

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `startTime` (string) - –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ (ISO 8601) **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**
- `endTime` (string) - –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è (ISO 8601) **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**
- `pageNo` (number) - –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `pageSize` (number) - –†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `eventType` (number) - –¢–∏–ø —Å–æ–±—ã—Ç–∏—è
- `personId` (string) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### POST `/api/hikvision/sync/users`
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ Hikvision –≤ PostgreSQL

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "pageNo": 1,
  "pageSize": 100,
  "personName": "–ò–≤–∞–Ω",
  "personId": "123456",
  "orgIndexCode": "org1"
}
```

### POST `/api/hikvision/sync/events`
–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –∏–∑ Hikvision –≤ PostgreSQL

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "startTime": "2024-01-01T00:00:00+05:00",
  "endTime": "2024-01-31T23:59:59+05:00",
  "pageNo": 1,
  "pageSize": 100,
  "eventType": 1,
  "personId": "123456789"
}
```

### GET `/api/hikvision/stats`
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π –∏–∑ PostgreSQL

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `startDate` (string) - –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (YYYY-MM-DD) **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**
- `endDate` (string) - –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (YYYY-MM-DD) **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**
- `personId` (string) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### GET `/api/hikvision/attendance`
–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–µ—â–µ–Ω–∏—è –∏–∑ PostgreSQL

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `startDate` (string) - –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
- `endDate` (string) - –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
- `personId` (string) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `eventType` (number) - –¢–∏–ø —Å–æ–±—ã—Ç–∏—è
- `limit` (number) - –õ–∏–º–∏—Ç –∑–∞–ø–∏—Å–µ–π
- `offset` (number) - –°–º–µ—â–µ–Ω–∏–µ

## ‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HMAC –ø–æ–¥–ø–∏—Å—å —Å –∫–ª—é—á–∞–º–∏ `PARTNER_KEY` –∏ `PARTNER_SECRET`
- –ü–æ–¥–ø–∏—Å—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `makeArtemisRequest`

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é —á–µ—Ä–µ–∑ `pageNo` –∏ `pageSize`
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 100-1000 –∑–∞–ø–∏—Å–µ–π

### –§–æ—Ä–º–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏
- **Hikvision API**: ISO 8601 —Å —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º (`2024-01-01T00:00:00+05:00`)
- **PostgreSQL**: TIMESTAMP WITH TIME ZONE
- **HTTP API**: ISO 8601 –¥–ª—è —Å–æ–±—ã—Ç–∏–π, YYYY-MM-DD –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
- `1` - –í—Ö–æ–¥
- `2` - –í—ã—Ö–æ–¥
- –î—Ä—É–≥–∏–µ —Ç–∏–ø—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Hikvision

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª–µ–º `success`
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `success: false` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏
- HTTP API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ HTTP –∫–æ–¥—ã —Å—Ç–∞—Ç—É—Å–∞

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ `person_id`, `event_time`, `event_type`
- –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —á–∞—Å—Ç—è–º

## üöÄ –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
npm install
```

2. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
npm start
```

3. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–æ–≤:**
```bash
node example-hikvision-usage.js
```

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP API:**
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
curl "http://localhost:3000/api/hikvision/users?pageNo=1&pageSize=5"

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
curl "http://localhost:3000/api/hikvision/events?startTime=2024-01-01T00:00:00+05:00&endTime=2024-01-31T23:59:59+05:00"
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Hikvision API:
- –£—Å–ø–µ—à–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é
- –î–æ—Å—Ç—É–ø –∫ –∏—Å—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ `/api/history`
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ `/api/statistics`

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `PARTNER_KEY` - –ö–ª—é—á –ø–∞—Ä—Ç–Ω–µ—Ä–∞ Hikvision
- `PARTNER_SECRET` - –°–µ–∫—Ä–µ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞ Hikvision  
- `ARTEMIS_HOST` - –•–æ—Å—Ç Hikvision —Å–µ—Ä–≤–µ—Ä–∞
- `PORT` - –ü–æ—Ä—Ç Express —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3000)

–°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL:
```javascript
postgresql://postgres:1234bobur$@192.168.1.253:5432/gubkin_dormitory
```

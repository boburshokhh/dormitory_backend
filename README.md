# HikCentral API Client

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HikCentral OpenAPI —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è** `faddUserHikcentral` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª—é–±—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏ HikCentral
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö HTTP –º–µ—Ç–æ–¥–æ–≤** (GET, POST, PUT, DELETE)
- **–ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ JSON** –æ—Ç–≤–µ—Ç–æ–≤ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

**–°–ø–æ—Å–æ–± 1: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env
PARTNER_KEY=your_partner_key_here
PARTNER_SECRET=your_partner_secret_here
ARTEMIS_HOST=your_artemis_host_here
PORT=3000
```

**–°–ø–æ—Å–æ–± 2: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π PowerShell —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```powershell
.\start-with-credentials.ps1
```

**–°–ø–æ—Å–æ–± 3: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ npm —Å–∫—Ä–∏–ø—Ç**
```bash
npm run start:prod
```

**–°–ø–æ—Å–æ–± 4: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é (PowerShell)**
```powershell
$env:PARTNER_KEY="28896788"
$env:PARTNER_SECRET="53KH1HXUrMmIu1lKb9CT"
$env:ARTEMIS_HOST="192.168.1.112"
npm start
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: 
- –ë–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É "The 'key' argument must be of type string"
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å **—Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏** –æ—Ç HikCentral API
- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `production-guide.md`

## üèÉ‚Äç‚ôÇÔ∏è –ó–∞–ø—É—Å–∫

```bash
npm start
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3000`

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è faddUserHikcentral

```javascript
import { faddUserHikcentral } from './index.js';

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const result = await faddUserHikcentral({
    url: '/artemis/api/resource/v1/acs/device/list',
    method: 'POST',
    data: {
        "acsDevIndexCode": "46"
    }
});

console.log(result);
```

### API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### POST /api/hikcentral
–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ HikCentral API

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
    "url": "/artemis/api/resource/v1/acs/device/list",
    "method": "POST",
    "data": {
        "acsDevIndexCode": "46"
    }
}
```

#### GET /api/hikcentral
GET –∑–∞–ø—Ä–æ—Å –∫ HikCentral API

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `url` - URL —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- `method` - HTTP –º–µ—Ç–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é GET)

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

- **–ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ URL** –∑–∞–ø—Ä–æ—Å–∞
- **–í—ã–±–æ—Ä HTTP –º–µ—Ç–æ–¥–∞** (GET, POST, PUT, DELETE)
- **–†–µ–¥–∞–∫—Ç–æ—Ä JSON** –¥–ª—è —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
- **–ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–ü—Ä–∏–º–µ—Ä—ã URL** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìã –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
```json
{
    "url": "/artemis/api/resource/v1/acs/device/list",
    "method": "POST",
    "data": {
        "acsDevIndexCode": "46"
    }
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```json
{
    "url": "/artemis/api/resource/v1/person/single/add",
    "method": "POST",
    "data": {
        "personInfo": {
            "personName": "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
            "orgIndexCode": "1"
        }
    }
}
```

### –ó–∞–ø—Ä–æ—Å —Å–æ–±—ã—Ç–∏–π
```json
{
    "url": "/artemis/api/resource/v1/acs/event/query",
    "method": "POST",
    "data": {
        "startTime": "2024-01-01T00:00:00+08:00",
        "endTime": "2024-01-02T00:00:00+08:00"
    }
}
```

## üõ†Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
hikcenter/
‚îú‚îÄ‚îÄ index.js          # –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å HikCentral API
‚îú‚îÄ‚îÄ server.js         # Express —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ package.json      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ index.html    # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ HikCentral API –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º HMAC-SHA256
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–ª—é—á–µ–π API
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

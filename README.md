# üè† Backend API - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–µ–∂–∏—Ç–∏—è–º–∏ –ì–£–ë–ö–ò–ù

Backend API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–µ–∂–∏—Ç–∏—è–º–∏ –†–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞ –Ω–µ—Ñ—Ç–∏ –∏ –≥–∞–∑–∞ –∏–º–µ–Ω–∏ –ò.–ú. –ì—É–±–∫–∏–Ω–∞.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–µ–∂–∏—Ç–∏—è–º–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–µ–∂–∏—Ç–∏—è–º–∏, —ç—Ç–∞–∂–∞–º–∏, –±–ª–æ–∫–∞–º–∏, –∫–æ–º–Ω–∞—Ç–∞–º–∏ –∏ –∫—Ä–æ–≤–∞—Ç—è–º–∏
- –ü–æ–¥–∞—á–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –∑–∞—Å–µ–ª–µ–Ω–∏–µ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ó–∞–≥—Ä—É–∑–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞–º–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Node.js** - —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **Express.js** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL** - –æ—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **MinIO** - –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è —Ñ–∞–π–ª–æ–≤
- **JWT** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **bcrypt** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **nodemailer** - –æ—Ç–ø—Ä–∞–≤–∫–∞ email
- **multer** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
- **helmet** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **morgan** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 16.0.0
- PostgreSQL >= 12
- MinIO Server
- npm >= 8.0.0

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/gubkin-university/dormitory-management.git
cd dormitory-management/backend
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
cp services/config.env.example services/config.env
```

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `services/config.env`

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
npm run db:migrate
```

6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω
npm start
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `services/config.env` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

```env
# –°–µ—Ä–≤–µ—Ä
NODE_ENV=development
PORT=3000
FRONTEND_URL=http://localhost:5173

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_HOST=localhost
DB_PORT=5432
DB_NAME=gubkin_dormitory
DB_USER=your_username
DB_PASSWORD=your_password

# JWT
JWT_SECRET=your_jwt_secret_key
JWT_EXPIRES_IN=24h
REFRESH_TOKEN_SECRET=your_refresh_token_secret
REFRESH_TOKEN_EXPIRES_IN=7d

# MinIO
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=your_access_key
MINIO_SECRET_KEY=your_secret_key
MINIO_BUCKET_NAME=gubkin-dormitory
MINIO_USE_SSL=false

# Email (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
SMTP_FROM=your_email@gmail.com

# SMS (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
SMS_API_KEY=your_sms_api_key
SMS_SENDER=GUBKIN
```

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ë–∞–∑–æ–≤—ã–π URL
```
http://localhost:3000/api
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:
```
Authorization: Bearer <your_jwt_token>
```

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth`)

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

**POST** `/api/auth/register-request`
- –ó–∞–ø—Ä–æ—Å –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- **Body:** `{ "contact": "email@example.com" }`

**POST** `/api/auth/register`
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –∫–æ–¥–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- **Body:** `{ "contact": "email@example.com", "code": "123456", "username": "student", "password": "password123" }`

#### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

**POST** `/api/auth/login`
- –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- **Body:** `{ "contact": "email@example.com", "password": "password123" }`

**POST** `/api/auth/refresh`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- **Body:** `{ "refreshToken": "your_refresh_token" }`

**POST** `/api/auth/logout`
- –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- **Headers:** `Authorization: Bearer <token>`

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

**POST** `/api/auth/forgot-password`
- –ó–∞–ø—Ä–æ—Å –∫–æ–¥–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
- **Body:** `{ "contact": "email@example.com" }`

**POST** `/api/auth/reset-password`
- –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è —Å –∫–æ–¥–æ–º
- **Body:** `{ "contact": "email@example.com", "code": "123456", "newPassword": "newpassword123" }`

### üè¢ –û–±—â–µ–∂–∏—Ç–∏—è (`/api/dormitories`)

**GET** `/api/dormitories`
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ–±—â–µ–∂–∏—Ç–∏—è —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/dormitories/available`
- –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–±—â–µ–∂–∏—Ç–∏—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/dormitories/:id`
- –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—â–µ–∂–∏—Ç–∏–∏
- **Headers:** `Authorization: Bearer <token>`

**POST** `/api/dormitories`
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –æ–±—â–µ–∂–∏—Ç–∏–µ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`
- **Body:** `{ "name": "–î–ü–°-1", "type": "type_1", "address": "—É–ª. –õ–µ–Ω–∏–Ω—Å–∫–∞—è, 65", "maxFloors": 9, "description": "–û–ø–∏—Å–∞–Ω–∏–µ" }`

**PUT** `/api/dormitories/:id`
- –û–±–Ω–æ–≤–∏—Ç—å –æ–±—â–µ–∂–∏—Ç–∏–µ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

**DELETE** `/api/dormitories/:id`
- –£–¥–∞–ª–∏—Ç—å –æ–±—â–µ–∂–∏—Ç–∏–µ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

### üè† –≠—Ç–∞–∂–∏ (`/api/floors`)

**GET** `/api/floors`
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —ç—Ç–∞–∂–∏
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/floors/dormitory/:dormitoryId`
- –ü–æ–ª—É—á–∏—Ç—å —ç—Ç–∞–∂–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±—â–µ–∂–∏—Ç–∏—è
- **Headers:** `Authorization: Bearer <token>`

**POST** `/api/floors`
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —ç—Ç–∞–∂ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

### üèòÔ∏è –ë–ª–æ–∫–∏ (`/api/blocks`)

**GET** `/api/blocks`
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –±–ª–æ–∫–∏
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/blocks/floor/:floorId`
- –ü–æ–ª—É—á–∏—Ç—å –±–ª–æ–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç—Ç–∞–∂–∞
- **Headers:** `Authorization: Bearer <token>`

**POST** `/api/blocks`
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –±–ª–æ–∫ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

### üõèÔ∏è –ö–æ–º–Ω–∞—Ç—ã (`/api/rooms`)

**GET** `/api/rooms`
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–æ–º–Ω–∞—Ç—ã
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/rooms/floor/:floorId`
- –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–Ω–∞—Ç—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç—Ç–∞–∂–∞
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/rooms/block/:blockId`
- –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–Ω–∞—Ç—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–ª–æ–∫–∞
- **Headers:** `Authorization: Bearer <token>`

**POST** `/api/rooms`
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

### üõå –ö—Ä–æ–≤–∞—Ç–∏ (`/api/beds`)

**GET** `/api/beds`
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫—Ä–æ–≤–∞—Ç–∏
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/beds/room/:roomId`
- –ü–æ–ª—É—á–∏—Ç—å –∫—Ä–æ–≤–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/beds/available`
- –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫—Ä–æ–≤–∞—Ç–∏
- **Headers:** `Authorization: Bearer <token>`

**POST** `/api/beds`
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫—Ä–æ–≤–∞—Ç—å (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

**PUT** `/api/beds/:id/occupy`
- –ó–∞–Ω—è—Ç—å –∫—Ä–æ–≤–∞—Ç—å
- **Headers:** `Authorization: Bearer <token>`

**PUT** `/api/beds/:id/free`
- –û—Å–≤–æ–±–æ–¥–∏—Ç—å –∫—Ä–æ–≤–∞—Ç—å
- **Headers:** `Authorization: Bearer <token>`

### üìù –ó–∞—è–≤–∫–∏ (`/api/applications`)

**GET** `/api/applications`
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏ (—Å—Ç—É–¥–µ–Ω—Ç –≤–∏–¥–∏—Ç —Å–≤–æ–∏, –∞–¥–º–∏–Ω - –≤—Å–µ)
- **Headers:** `Authorization: Bearer <token>`

**POST** `/api/applications`
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É
- **Headers:** `Authorization: Bearer <token>`
- **Body:** `{ "dormitoryId": 1, "floorId": 2, "roomId": 5, "bedId": 10, "reason": "–ó–∞—Å–µ–ª–µ–Ω–∏–µ" }`

**PUT** `/api/applications/:id/approve`
- –û–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

**PUT** `/api/applications/:id/reject`
- –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞—è–≤–∫—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

### üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (`/api/users`)

**GET** `/api/users`
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/users/:id`
- –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
- **Headers:** `Authorization: Bearer <token>`

**PUT** `/api/users/:id`
- –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Headers:** `Authorization: Bearer <token>`

**DELETE** `/api/users/:id`
- –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

### üë§ –ü—Ä–æ—Ñ–∏–ª—å (`/api/profile`)

**GET** `/api/profile`
- –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Headers:** `Authorization: Bearer <token>`

**PUT** `/api/profile`
- –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- **Headers:** `Authorization: Bearer <token>`

**POST** `/api/profile/change-password`
- –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
- **Headers:** `Authorization: Bearer <token>`

### üìÅ –§–∞–π–ª—ã (`/api/files`)

**POST** `/api/files/upload`
- –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
- **Headers:** `Authorization: Bearer <token>`
- **Body:** `FormData` —Å —Ñ–∞–π–ª–æ–º

**GET** `/api/files/:filename`
- –ü–æ–ª—É—á–∏—Ç—å —Ñ–∞–π–ª
- **Headers:** `Authorization: Bearer <token>`

**DELETE** `/api/files/:filename`
- –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª
- **Headers:** `Authorization: Bearer <token>`

### üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (`/api/structure`)

**GET** `/api/structure`
- –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ–±—â–µ–∂–∏—Ç–∏–π
- **Headers:** `Authorization: Bearer <token>`

**GET** `/api/structure/dormitory/:id`
- –ü–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±—â–µ–∂–∏—Ç–∏—è
- **Headers:** `Authorization: Bearer <token>`

### üë• –ì—Ä—É–ø–ø—ã (`/api/groups`)

**GET** `/api/groups`
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≥—Ä—É–ø–ø—ã
- **Headers:** `Authorization: Bearer <token>`

**POST** `/api/groups`
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

### üìã –õ–æ–≥–∏ (`/api/logs`)

**GET** `/api/logs`
- –ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)
- **Headers:** `Authorization: Bearer <token>`

### üè• Health Check

**GET** `/api/health`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
- **–û—Ç–≤–µ—Ç:** `{ "status": "OK", "timestamp": "...", "environment": "..." }`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database.js        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ minio.js           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ MinIO
‚îú‚îÄ‚îÄ middleware/            # Middleware
‚îÇ   ‚îú‚îÄ‚îÄ auth.js           # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ logging.js        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ routes/               # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îú‚îÄ‚îÄ auth.js          # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ dormitories.js   # –û–±—â–µ–∂–∏—Ç–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ floors.js        # –≠—Ç–∞–∂–∏
‚îÇ   ‚îú‚îÄ‚îÄ blocks.js        # –ë–ª–æ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ rooms.js         # –ö–æ–º–Ω–∞—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ beds.js          # –ö—Ä–æ–≤–∞—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ applications.js  # –ó–∞—è–≤–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ users.js         # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ profile.js       # –ü—Ä–æ—Ñ–∏–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ files.js         # –§–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ structure.js     # –°—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ groups.js        # –ì—Ä—É–ø–ø—ã
‚îÇ   ‚îî‚îÄ‚îÄ logs.js          # –õ–æ–≥–∏
‚îú‚îÄ‚îÄ services/            # –°–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ notificationService.js  # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ loggingService.js       # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ uploads/             # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ server.js           # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îî‚îÄ‚îÄ package.json        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üõ† –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–∫—Ä–∏–ø—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ
npm start

# –¢–µ—Å—Ç—ã
npm test

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
npm run db:migrate
npm run db:seed
npm run db:reset

# PM2 —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
npm run pm2:start
npm run pm2:restart
npm run pm2:stop
npm run pm2:logs

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
npm run test:smtp
npm run test:minio
npm run test:upload
npm run test:api
npm run test:duplicates
npm run test:preview
npm run test:all
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- Postman
- Insomnia
- curl
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- API –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –û—à–∏–±–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- bcrypt –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DDoS
- Helmet –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å:
- Email: support@gubkin.ru
- GitHub Issues: [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/gubkin-university/dormitory-management/issues)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

**–†–æ—Å—Å–∏–π—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –Ω–µ—Ñ—Ç–∏ –∏ –≥–∞–∑–∞ –∏–º–µ–Ω–∏ –ò.–ú. –ì—É–±–∫–∏–Ω–∞**  
üè† –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–µ–∂–∏—Ç–∏—è–º–∏ 